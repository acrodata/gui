<mat-form-field>
  <ng-container matPrefix>
    <span class="gui-color-block">
      <span
        class="gui-color-block-bg"
        [style.background]="value + ' center / contain no-repeat'"
      ></span>
    </span>
  </ng-container>

  <input
    matInput
    [(ngModel)]="value"
    [disabled]="disabled"
    [placeholder]="config.placeholder || ''"
    [mtxColorpicker]="cp"
    (colorChange)="onValueChange()"
  />

  <mtx-colorpicker #cp [content]="customPickerContent" />
  <gui-icon-button-wrapper matSuffix>
    <mtx-colorpicker-toggle [for]="cp" />
  </gui-icon-button-wrapper>

  @if (config.parentType === 'inline') {
    <mat-hint>
      <gui-field-label [config]="config" />
    </mat-hint>
  }
</mat-form-field>

<ng-template #customPickerContent>
  <gui-fill-picker [(ngModel)]="cp.selected" (ngModelChange)="cp.select($event)" />
</ng-template>
